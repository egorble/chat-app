# üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º –∑ –≤–∏–¥–∞–ª–µ–Ω–Ω—è–º —Ç–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º —á–∞—Ç—ñ–≤

## üéØ –í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏

### 1. –í–∏–¥–∞–ª–µ–Ω—ñ —á–∞—Ç–∏ –≤—Å–µ —â–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞–ª–∏—Å—è
**–ü—Ä–∏—á–∏–Ω–∞:** –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –≤–∏–¥–∞–ª–µ–Ω–∏—Ö —á–∞—Ç—ñ–≤ –ø—Ä–∞—Ü—é–≤–∞–ª–∞ —Ç—ñ–ª—å–∫–∏ –Ω–∞ —Ä—ñ–≤–Ω—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö, –∞–ª–µ –Ω–µ –Ω–∞ —Ä—ñ–≤–Ω—ñ GraphQL –∑–∞–ø–∏—Ç—É.

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
- ‚úÖ –î–æ–¥–∞–Ω–æ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é –≤–∏–¥–∞–ª–µ–Ω–∏—Ö —á–∞—Ç—ñ–≤ –Ω–∞ —Ä—ñ–≤–Ω—ñ –æ–±—Ä–æ–±–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π –≤ `/api/load-chats`
- ‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É `isDeleted === true` –∑–∞–º—ñ—Å—Ç—å –ø—Ä–æ—Å—Ç–æ `isDeleted`
- ‚úÖ –î–æ–¥–∞–Ω–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ–ø—É—Å–∫—É –≤–∏–¥–∞–ª–µ–Ω–∏—Ö —á–∞—Ç—ñ–≤

### 2. –ù–æ–≤—ñ —á–∞—Ç–∏ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞–ª–∏—Å—è –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
**–ü—Ä–∏—á–∏–Ω–∞:** –õ–æ–≥—ñ–∫–∞ –∑–ª–∏—Ç—Ç—è —á–∞—Ç—ñ–≤ —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞–ª–∞ –Ω–æ–≤—ñ —á–∞—Ç–∏, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤, —â–æ –ø–µ—Ä–µ—à–∫–æ–¥–∂–∞–ª–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—é.

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
- ‚úÖ –ó–º—ñ–Ω–µ–Ω–æ –ª–æ–≥—ñ–∫—É `loadChatsFromIrys` –¥–ª—è –ø–æ–≤–Ω–æ—ó –∑–∞–º—ñ–Ω–∏ —á–∞—Ç—ñ–≤ –∑–∞–º—ñ—Å—Ç—å –∑–ª–∏—Ç—Ç—è
- ‚úÖ –¶–µ –∑–∞–±–µ–∑–ø–µ—á—É—î –ø—Ä–∞–≤–∏–ª—å–Ω—É —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é –≤–∏–¥–∞–ª–µ–Ω–∏—Ö —á–∞—Ç—ñ–≤ —Ç–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö

## üß™ –Ø–∫ –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

### –¢–µ—Å—Ç 1: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –≤–∏–¥–∞–ª–µ–Ω–∏—Ö —á–∞—Ç—ñ–≤
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–æ–¥–∞—Ç–æ–∫ —É –±—Ä–∞—É–∑–µ—Ä—ñ
2. –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å –≥–∞–º–∞–Ω–µ—Ü—å
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console)
4. –®—É–∫–∞–π—Ç–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: `üóëÔ∏è Skipping deleted chat transaction: [chatId]`
5. **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í–∏–¥–∞–ª–µ–Ω—ñ —á–∞—Ç–∏ –Ω–µ –ø–æ–≤–∏–Ω–Ω—ñ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—è –≤ —Å–ø–∏—Å–∫—É

### –¢–µ—Å—Ç 2: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö —á–∞—Ç—ñ–≤
1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π —á–∞—Ç —Ç–∞ –¥–æ–¥–∞–π—Ç–µ –∫—ñ–ª—å–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
2. –î–æ—á–µ–∫–∞–π—Ç–µ—Å—è –∞–≤—Ç–æ–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è (–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ –∫–æ–Ω—Å–æ–ª—ñ: `‚úÖ Chat saved to Irys successfully`)
3. –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É (F5)
4. –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å –≥–∞–º–∞–Ω–µ—Ü—å –∑–Ω–æ–≤—É
5. **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–æ–≤–∏–π —á–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω –∑'—è–≤–∏—Ç–∏—Å—è –≤ —Å–ø–∏—Å–∫—É –∑ —É—Å—ñ–º–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏

### –¢–µ—Å—Ç 3: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è —á–∞—Ç—ñ–≤
1. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤–∏–π —á–∞—Ç
2. –í–∏–¥–∞–ª—ñ—Ç—å –π–æ–≥–æ (–Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å —ñ–∫–æ–Ω–∫—É –∫–æ—Ä–∑–∏–Ω–∏ —Ç–∞ –ø—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å)
3. –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É
4. **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í–∏–¥–∞–ª–µ–Ω–∏–π —á–∞—Ç –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω –∑'—è–≤–∏—Ç–∏—Å—è –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

## üìã –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –≤ –∫–æ–Ω—Å–æ–ª—ñ

### –ü—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —á–∞—Ç—ñ–≤:
```
üîç Loading chats for user: [–∞–¥—Ä–µ—Å–∞]
üì° Executing GraphQL query: ...
üìã Found X chat transactions
üóëÔ∏è Skipping deleted chat transaction: [chatId] (–¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–∏—Ö —á–∞—Ç—ñ–≤)
üì• Loading chat data for transaction: [transactionId]
‚úÖ Chat loaded: [–Ω–∞–∑–≤–∞ —á–∞—Ç—É]
üéâ Successfully loaded X chats for user
```

### –ü—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ —á–∞—Ç—É:
```
üóëÔ∏è Saving deletion state to Irys for chat: [chatId]
üíæ Saving deletion state to Irys: [chatId]
‚úÖ Chat saved to Irys successfully
‚úÖ Deletion state saved to Irys
```

## üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –∑–º—ñ–Ω–∏

### –§–∞–π–ª–∏, —â–æ –±—É–ª–∏ –æ–Ω–æ–≤–ª–µ–Ω—ñ:

1. **`/api/load-chats/route.ts`:**
   - –î–æ–¥–∞–Ω–æ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é –≤–∏–¥–∞–ª–µ–Ω–∏—Ö —á–∞—Ç—ñ–≤ –Ω–∞ —Ä—ñ–≤–Ω—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
   - –ü–æ–∫—Ä–∞—â–µ–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É `isDeleted === true`
   - –î–æ–¥–∞–Ω–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ–ø—É—Å–∫—É –≤–∏–¥–∞–ª–µ–Ω–∏—Ö —á–∞—Ç—ñ–≤

2. **`chat-history-context.tsx`:**
   - –ó–º—ñ–Ω–µ–Ω–æ –ª–æ–≥—ñ–∫—É `loadChatsFromIrys` –¥–ª—è –ø–æ–≤–Ω–æ—ó –∑–∞–º—ñ–Ω–∏ —á–∞—Ç—ñ–≤
   - –í–∏–¥–∞–ª–µ–Ω–æ –∑–ª–∏—Ç—Ç—è –∑ —ñ—Å–Ω—É—é—á–∏–º–∏ —á–∞—Ç–∞–º–∏

## üö® –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

### –ü—Ä–æ–±–ª–µ–º–∞: –°—Ç–∞—Ä—ñ –≤–∏–¥–∞–ª–µ–Ω—ñ —á–∞—Ç–∏ –≤—Å–µ —â–µ –ø–æ–∫–∞–∑—É—é—Ç—å—Å—è
**–†—ñ—à–µ–Ω–Ω—è:** –°—Ç–∞—Ä—ñ —á–∞—Ç–∏ –º–æ–≥–ª–∏ –±—É—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –±–µ–∑ —Ç–µ–≥—É `Is-Deleted`. –í–∏–¥–∞–ª—ñ—Ç—å —ó—Ö –≤—Ä—É—á–Ω—É —á–µ—Ä–µ–∑ UI, —â–æ–± –∑–±–µ—Ä–µ–≥—Ç–∏ —Å—Ç–∞–Ω –≤–∏–¥–∞–ª–µ–Ω–Ω—è.

### –ü—Ä–æ–±–ª–µ–º–∞: –ß–∞—Ç–∏ –¥—É–±–ª—é—é—Ç—å—Å—è
**–†—ñ—à–µ–Ω–Ω—è:** –û—á–∏—Å—Ç—ñ—Ç—å –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+R) —Ç–∞ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É.

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–≤—ñ–ª—å–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
**–†—ñ—à–µ–Ω–Ω—è:** –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –ø–µ—Ä—à–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, –æ—Å–∫—ñ–ª—å–∫–∏ —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –≤—Å—ñ —á–∞—Ç–∏ –∑ Irys.

## ‚úÖ –û—á—ñ–∫—É–≤–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

- ‚úÖ –í–∏–¥–∞–ª–µ–Ω—ñ —á–∞—Ç–∏ –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫—É
- ‚úÖ –ù–æ–≤—ñ —á–∞—Ç–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏
- ‚úÖ –í–∏–¥–∞–ª–µ–Ω–Ω—è —á–∞—Ç—ñ–≤ –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ –∑ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è–º
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—è –Ω–∞ —ñ–Ω—à–∏–π —á–∞—Ç –ø—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è —Å—Ç–∞–Ω—É –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑ Irys

---

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –í—Å—ñ –∑–º—ñ–Ω–∏ –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω—ñ —Ç–∞ —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–∏–π. –î–æ–¥–∞—Ç–æ–∫ –≥–æ—Ç–æ–≤–∏–π –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è!